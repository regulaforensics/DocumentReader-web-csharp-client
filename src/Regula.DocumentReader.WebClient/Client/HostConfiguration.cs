/*
 * Regula Document Reader Web API
 *
 * Documents recognition as easy as reading two bytes.   # Clients: * [JavaScript](https://github.com/regulaforensics/DocumentReader-web-js-client) client for the browser and node.js based on axios * [Java](https://github.com/regulaforensics/DocumentReader-web-java-client) client compatible with jvm and android * [Python](https://github.com/regulaforensics/DocumentReader-web-python-client) 3.5+ client * [C#](https://github.com/regulaforensics/DocumentReader-web-csharp-client) client for .NET & .NET Core 
 *
 * The version of the OpenAPI document: 7.4.0
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */

#nullable enable

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text.Json;
using System.Text.Json.Serialization;
using System.Net.Http;
using Microsoft.Extensions.DependencyInjection;
using Regula.DocumentReader.WebClient.Api;
using Regula.DocumentReader.WebClient.Model;

namespace Regula.DocumentReader.WebClient.Client
{
    /// <summary>
    /// Provides hosting configuration for Regula.DocumentReader.WebClient
    /// </summary>
    public class HostConfiguration
    {
        private readonly IServiceCollection _services;
        private readonly JsonSerializerOptions _jsonOptions = new JsonSerializerOptions();

        internal bool HttpClientsAdded { get; private set; }

        /// <summary>
        /// Instantiates the class 
        /// </summary>
        /// <param name="services"></param>
        public HostConfiguration(IServiceCollection services)
        {
            _services = services;
            _jsonOptions.Converters.Add(new JsonStringEnumConverter());
            _jsonOptions.Converters.Add(new DateTimeJsonConverter());
            _jsonOptions.Converters.Add(new DateTimeNullableJsonConverter());
            _jsonOptions.Converters.Add(new DateOnlyJsonConverter());
            _jsonOptions.Converters.Add(new DateOnlyNullableJsonConverter());
            _jsonOptions.Converters.Add(new AreaArrayJsonConverter());
            _jsonOptions.Converters.Add(new AreaContainerJsonConverter());
            _jsonOptions.Converters.Add(new AuthParamsJsonConverter());
            _jsonOptions.Converters.Add(new AuthenticityCheckListJsonConverter());
            _jsonOptions.Converters.Add(new AuthenticityCheckListItemJsonConverter());
            _jsonOptions.Converters.Add(new AuthenticityCheckResultJsonConverter());
            _jsonOptions.Converters.Add(new AuthenticityCheckResultItemJsonConverter());
            _jsonOptions.Converters.Add(new AuthenticityCheckResultListInnerJsonConverter());
            _jsonOptions.Converters.Add(new AuthenticityResultJsonConverter());
            _jsonOptions.Converters.Add(new AuthenticityResultTypeJsonConverter());
            _jsonOptions.Converters.Add(new AuthenticityResultTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new BarCodeModuleTypeJsonConverter());
            _jsonOptions.Converters.Add(new BarCodeModuleTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new BarcodeTypeJsonConverter());
            _jsonOptions.Converters.Add(new BarcodeTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new BcPDF417INFOJsonConverter());
            _jsonOptions.Converters.Add(new BcROIDETECTJsonConverter());
            _jsonOptions.Converters.Add(new BinaryDataJsonConverter());
            _jsonOptions.Converters.Add(new ByteArrayItemJsonConverter());
            _jsonOptions.Converters.Add(new ByteArrayResultJsonConverter());
            _jsonOptions.Converters.Add(new CandidatesListItemJsonConverter());
            _jsonOptions.Converters.Add(new CertificateDataJsonConverter());
            _jsonOptions.Converters.Add(new CheckDiagnoseJsonConverter());
            _jsonOptions.Converters.Add(new CheckDiagnoseNullableJsonConverter());
            _jsonOptions.Converters.Add(new CheckResultJsonConverter());
            _jsonOptions.Converters.Add(new CheckResultNullableJsonConverter());
            _jsonOptions.Converters.Add(new ChosenDocumentTypeJsonConverter());
            _jsonOptions.Converters.Add(new ChosenDocumentTypeResultJsonConverter());
            _jsonOptions.Converters.Add(new ContainerListJsonConverter());
            _jsonOptions.Converters.Add(new ContainerListListInnerJsonConverter());
            _jsonOptions.Converters.Add(new CriticalJsonConverter());
            _jsonOptions.Converters.Add(new CriticalNullableJsonConverter());
            _jsonOptions.Converters.Add(new CrossSourceValueComparisonJsonConverter());
            _jsonOptions.Converters.Add(new DataModuleJsonConverter());
            _jsonOptions.Converters.Add(new DetailsOpticalJsonConverter());
            _jsonOptions.Converters.Add(new DetailsRFIDJsonConverter());
            _jsonOptions.Converters.Add(new DeviceInfoJsonConverter());
            _jsonOptions.Converters.Add(new DocBarCodeInfoJsonConverter());
            _jsonOptions.Converters.Add(new DocBarCodeInfoFieldsListJsonConverter());
            _jsonOptions.Converters.Add(new DocBarCodeInfoItemJsonConverter());
            _jsonOptions.Converters.Add(new DocGraphicsInfoItemJsonConverter());
            _jsonOptions.Converters.Add(new DocVisualExtendedFieldJsonConverter());
            _jsonOptions.Converters.Add(new DocVisualExtendedFieldItemJsonConverter());
            _jsonOptions.Converters.Add(new DocVisualExtendedInfoJsonConverter());
            _jsonOptions.Converters.Add(new DocVisualExtendedInfoItemJsonConverter());
            _jsonOptions.Converters.Add(new DocumentBinaryInfoResultJsonConverter());
            _jsonOptions.Converters.Add(new DocumentFormatJsonConverter());
            _jsonOptions.Converters.Add(new DocumentFormatNullableJsonConverter());
            _jsonOptions.Converters.Add(new DocumentImageJsonConverter());
            _jsonOptions.Converters.Add(new DocumentImageResultJsonConverter());
            _jsonOptions.Converters.Add(new DocumentPositionJsonConverter());
            _jsonOptions.Converters.Add(new DocumentPositionItemJsonConverter());
            _jsonOptions.Converters.Add(new DocumentPositionResultJsonConverter());
            _jsonOptions.Converters.Add(new DocumentTypeJsonConverter());
            _jsonOptions.Converters.Add(new DocumentTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new DocumentTypeRecognitionResultJsonConverter());
            _jsonOptions.Converters.Add(new DocumentTypeRecognitionResultNullableJsonConverter());
            _jsonOptions.Converters.Add(new DocumentTypesCandidatesJsonConverter());
            _jsonOptions.Converters.Add(new DocumentTypesCandidatesListJsonConverter());
            _jsonOptions.Converters.Add(new DocumentTypesCandidatesResultJsonConverter());
            _jsonOptions.Converters.Add(new DocumentsDatabaseJsonConverter());
            _jsonOptions.Converters.Add(new EncryptedRCLItemJsonConverter());
            _jsonOptions.Converters.Add(new EncryptedRCLResultJsonConverter());
            _jsonOptions.Converters.Add(new ErrorCoordinatesJsonConverter());
            _jsonOptions.Converters.Add(new FDSIDListJsonConverter());
            _jsonOptions.Converters.Add(new FaceApiJsonConverter());
            _jsonOptions.Converters.Add(new FaceApiSearchJsonConverter());
            _jsonOptions.Converters.Add(new FaceDetectionJsonConverter());
            _jsonOptions.Converters.Add(new FaceDetectionItemJsonConverter());
            _jsonOptions.Converters.Add(new FaceDetectionResultJsonConverter());
            _jsonOptions.Converters.Add(new FaceItemJsonConverter());
            _jsonOptions.Converters.Add(new FiberItemJsonConverter());
            _jsonOptions.Converters.Add(new FiberResultJsonConverter());
            _jsonOptions.Converters.Add(new FieldItemJsonConverter());
            _jsonOptions.Converters.Add(new FileImageJsonConverter());
            _jsonOptions.Converters.Add(new GetTransactionsByTagResponseJsonConverter());
            _jsonOptions.Converters.Add(new GraphDataJsonConverter());
            _jsonOptions.Converters.Add(new GraphicFieldJsonConverter());
            _jsonOptions.Converters.Add(new GraphicFieldTypeJsonConverter());
            _jsonOptions.Converters.Add(new GraphicFieldTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new GraphicFieldsListJsonConverter());
            _jsonOptions.Converters.Add(new GraphicsResultJsonConverter());
            _jsonOptions.Converters.Add(new HealthcheckJsonConverter());
            _jsonOptions.Converters.Add(new HealthcheckDocumentsDatabaseJsonConverter());
            _jsonOptions.Converters.Add(new IdentItemJsonConverter());
            _jsonOptions.Converters.Add(new IdentResultJsonConverter());
            _jsonOptions.Converters.Add(new ImageDataJsonConverter());
            _jsonOptions.Converters.Add(new ImageQAJsonConverter());
            _jsonOptions.Converters.Add(new ImageQualityCheckJsonConverter());
            _jsonOptions.Converters.Add(new ImageQualityCheckListJsonConverter());
            _jsonOptions.Converters.Add(new ImageQualityCheckListItemJsonConverter());
            _jsonOptions.Converters.Add(new ImageQualityCheckTypeJsonConverter());
            _jsonOptions.Converters.Add(new ImageQualityCheckTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new ImageQualityResultJsonConverter());
            _jsonOptions.Converters.Add(new ImageTransactionDataJsonConverter());
            _jsonOptions.Converters.Add(new ImagesJsonConverter());
            _jsonOptions.Converters.Add(new ImagesAvailableSourceJsonConverter());
            _jsonOptions.Converters.Add(new ImagesFieldJsonConverter());
            _jsonOptions.Converters.Add(new ImagesFieldValueJsonConverter());
            _jsonOptions.Converters.Add(new ImagesItemJsonConverter());
            _jsonOptions.Converters.Add(new ImagesResultJsonConverter());
            _jsonOptions.Converters.Add(new InDataJsonConverter());
            _jsonOptions.Converters.Add(new InDataTransactionImagesFieldValueJsonConverter());
            _jsonOptions.Converters.Add(new InDataVideoJsonConverter());
            _jsonOptions.Converters.Add(new InputBarcodeTypeJsonConverter());
            _jsonOptions.Converters.Add(new InputBarcodeTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new InputImageQualityChecksJsonConverter());
            _jsonOptions.Converters.Add(new InputImageQualityChecksNullableJsonConverter());
            _jsonOptions.Converters.Add(new LCIDJsonConverter());
            _jsonOptions.Converters.Add(new LCIDNullableJsonConverter());
            _jsonOptions.Converters.Add(new LexicalAnalysisResultJsonConverter());
            _jsonOptions.Converters.Add(new LicenseItemJsonConverter());
            _jsonOptions.Converters.Add(new LicenseResultJsonConverter());
            _jsonOptions.Converters.Add(new LightJsonConverter());
            _jsonOptions.Converters.Add(new LightNullableJsonConverter());
            _jsonOptions.Converters.Add(new ListTransactionsByTagResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListVerifiedFieldsJsonConverter());
            _jsonOptions.Converters.Add(new ListVerifiedFieldsItemJsonConverter());
            _jsonOptions.Converters.Add(new LivenessParamsJsonConverter());
            _jsonOptions.Converters.Add(new LogLevelJsonConverter());
            _jsonOptions.Converters.Add(new LogLevelNullableJsonConverter());
            _jsonOptions.Converters.Add(new MRZDetectorResultJsonConverter());
            _jsonOptions.Converters.Add(new MRZFormatJsonConverter());
            _jsonOptions.Converters.Add(new MRZFormatNullableJsonConverter());
            _jsonOptions.Converters.Add(new MRZPositionResultJsonConverter());
            _jsonOptions.Converters.Add(new MRZRowsItemJsonConverter());
            _jsonOptions.Converters.Add(new MRZTestQualityJsonConverter());
            _jsonOptions.Converters.Add(new MRZTestQualityItemJsonConverter());
            _jsonOptions.Converters.Add(new MRZTestQualityResultJsonConverter());
            _jsonOptions.Converters.Add(new MeasureSystemJsonConverter());
            _jsonOptions.Converters.Add(new MeasureSystemNullableJsonConverter());
            _jsonOptions.Converters.Add(new MrzDetectModeEnumJsonConverter());
            _jsonOptions.Converters.Add(new MrzDetectModeEnumNullableJsonConverter());
            _jsonOptions.Converters.Add(new MrzPositionJsonConverter());
            _jsonOptions.Converters.Add(new MrzPositionItemJsonConverter());
            _jsonOptions.Converters.Add(new OCRSecurityTextItemJsonConverter());
            _jsonOptions.Converters.Add(new OCRSecurityTextResultJsonConverter());
            _jsonOptions.Converters.Add(new OneCandidateJsonConverter());
            _jsonOptions.Converters.Add(new OneCandidateItemJsonConverter());
            _jsonOptions.Converters.Add(new OriginalSymbolJsonConverter());
            _jsonOptions.Converters.Add(new OutDataJsonConverter());
            _jsonOptions.Converters.Add(new OutDataTransactionImagesFieldValueJsonConverter());
            _jsonOptions.Converters.Add(new PArrayFieldJsonConverter());
            _jsonOptions.Converters.Add(new ParsedDataJsonConverter());
            _jsonOptions.Converters.Add(new ParsingNotificationCodesJsonConverter());
            _jsonOptions.Converters.Add(new ParsingNotificationCodesNullableJsonConverter());
            _jsonOptions.Converters.Add(new PerDocumentConfigJsonConverter());
            _jsonOptions.Converters.Add(new PhotoIdentItemJsonConverter());
            _jsonOptions.Converters.Add(new PhotoIdentResultJsonConverter());
            _jsonOptions.Converters.Add(new PointJsonConverter());
            _jsonOptions.Converters.Add(new PointArrayJsonConverter());
            _jsonOptions.Converters.Add(new PointsContainerJsonConverter());
            _jsonOptions.Converters.Add(new ProcessParamsJsonConverter());
            _jsonOptions.Converters.Add(new ProcessParamsRfidJsonConverter());
            _jsonOptions.Converters.Add(new ProcessRequestJsonConverter());
            _jsonOptions.Converters.Add(new ProcessRequestImageJsonConverter());
            _jsonOptions.Converters.Add(new ProcessResponseJsonConverter());
            _jsonOptions.Converters.Add(new ProcessSystemInfoJsonConverter());
            _jsonOptions.Converters.Add(new ProcessingStatusJsonConverter());
            _jsonOptions.Converters.Add(new ProcessingStatusNullableJsonConverter());
            _jsonOptions.Converters.Add(new RFIDDocVisualExtendedFieldJsonConverter());
            _jsonOptions.Converters.Add(new RFIDDocVisualExtendedFieldItemJsonConverter());
            _jsonOptions.Converters.Add(new RFIDDocVisualExtendedInfoJsonConverter());
            _jsonOptions.Converters.Add(new RFIDDocVisualExtendedInfoItemJsonConverter());
            _jsonOptions.Converters.Add(new RFIDErrorCodesJsonConverter());
            _jsonOptions.Converters.Add(new RFIDErrorCodesNullableJsonConverter());
            _jsonOptions.Converters.Add(new RFIDGraphicsInfoResultJsonConverter());
            _jsonOptions.Converters.Add(new RFIDPKDResourceTypeJsonConverter());
            _jsonOptions.Converters.Add(new RFIDPKDResourceTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new RFIDTextDataResultJsonConverter());
            _jsonOptions.Converters.Add(new RawImageContainerItemJsonConverter());
            _jsonOptions.Converters.Add(new RawImageContainerListJsonConverter());
            _jsonOptions.Converters.Add(new RectangleCoordinatesJsonConverter());
            _jsonOptions.Converters.Add(new ResultJsonConverter());
            _jsonOptions.Converters.Add(new ResultNullableJsonConverter());
            _jsonOptions.Converters.Add(new ResultItemJsonConverter());
            _jsonOptions.Converters.Add(new ResultMRZDetectorJsonConverter());
            _jsonOptions.Converters.Add(new ResultMRZDetectorItemJsonConverter());
            _jsonOptions.Converters.Add(new RfidAChipJsonConverter());
            _jsonOptions.Converters.Add(new RfidAChipNullableJsonConverter());
            _jsonOptions.Converters.Add(new RfidAccessControlInfoJsonConverter());
            _jsonOptions.Converters.Add(new RfidAccessControlProcedureTypeJsonConverter());
            _jsonOptions.Converters.Add(new RfidAccessControlProcedureTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new RfidAccessKeyJsonConverter());
            _jsonOptions.Converters.Add(new RfidApplicationJsonConverter());
            _jsonOptions.Converters.Add(new RfidApplicationTypeJsonConverter());
            _jsonOptions.Converters.Add(new RfidApplicationTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new RfidAttributeDataJsonConverter());
            _jsonOptions.Converters.Add(new RfidAttributeNameJsonConverter());
            _jsonOptions.Converters.Add(new RfidAuthenticationProcedureTypeJsonConverter());
            _jsonOptions.Converters.Add(new RfidAuthenticationProcedureTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new RfidBaudRateJsonConverter());
            _jsonOptions.Converters.Add(new RfidBaudRateNullableJsonConverter());
            _jsonOptions.Converters.Add(new RfidCardPropertiesExtJsonConverter());
            _jsonOptions.Converters.Add(new RfidCertificateExJsonConverter());
            _jsonOptions.Converters.Add(new RfidCertificateOriginJsonConverter());
            _jsonOptions.Converters.Add(new RfidCertificateOriginNullableJsonConverter());
            _jsonOptions.Converters.Add(new RfidCertificateTypeJsonConverter());
            _jsonOptions.Converters.Add(new RfidCertificateTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new RfidDG1JsonConverter());
            _jsonOptions.Converters.Add(new RfidDataFileJsonConverter());
            _jsonOptions.Converters.Add(new RfidDataFileTypeJsonConverter());
            _jsonOptions.Converters.Add(new RfidDataFileTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new RfidDataGroupTypeTagJsonConverter());
            _jsonOptions.Converters.Add(new RfidDataGroupTypeTagNullableJsonConverter());
            _jsonOptions.Converters.Add(new RfidDistinguishedNameJsonConverter());
            _jsonOptions.Converters.Add(new RfidLocationJsonConverter());
            _jsonOptions.Converters.Add(new RfidLocationNullableJsonConverter());
            _jsonOptions.Converters.Add(new RfidOriginJsonConverter());
            _jsonOptions.Converters.Add(new RfidPasswordTypeJsonConverter());
            _jsonOptions.Converters.Add(new RfidPasswordTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new RfidPkiExtensionJsonConverter());
            _jsonOptions.Converters.Add(new RfidRawDataJsonConverter());
            _jsonOptions.Converters.Add(new RfidSecurityObjectJsonConverter());
            _jsonOptions.Converters.Add(new RfidSessionDataJsonConverter());
            _jsonOptions.Converters.Add(new RfidSignerInfoExJsonConverter());
            _jsonOptions.Converters.Add(new RfidTerminalJsonConverter());
            _jsonOptions.Converters.Add(new RfidTerminalTypeJsonConverter());
            _jsonOptions.Converters.Add(new RfidTerminalTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new RfidTypeJsonConverter());
            _jsonOptions.Converters.Add(new RfidTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new RfidValidityJsonConverter());
            _jsonOptions.Converters.Add(new ScenarioJsonConverter());
            _jsonOptions.Converters.Add(new ScenarioNullableJsonConverter());
            _jsonOptions.Converters.Add(new SecurityFeatureItemJsonConverter());
            _jsonOptions.Converters.Add(new SecurityFeatureResultJsonConverter());
            _jsonOptions.Converters.Add(new SecurityFeatureTypeJsonConverter());
            _jsonOptions.Converters.Add(new SecurityFeatureTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new SecurityObjectCertificatesJsonConverter());
            _jsonOptions.Converters.Add(new SourceJsonConverter());
            _jsonOptions.Converters.Add(new SourceNullableJsonConverter());
            _jsonOptions.Converters.Add(new SourceValidityJsonConverter());
            _jsonOptions.Converters.Add(new StatusJsonConverter());
            _jsonOptions.Converters.Add(new StatusItemJsonConverter());
            _jsonOptions.Converters.Add(new StatusResultJsonConverter());
            _jsonOptions.Converters.Add(new StringItemJsonConverter());
            _jsonOptions.Converters.Add(new StringRecognitionResultJsonConverter());
            _jsonOptions.Converters.Add(new SymbolJsonConverter());
            _jsonOptions.Converters.Add(new SymbolCandidateJsonConverter());
            _jsonOptions.Converters.Add(new SymbolEstimationItemJsonConverter());
            _jsonOptions.Converters.Add(new SymbolRecognitionResultJsonConverter());
            _jsonOptions.Converters.Add(new TDocBinaryInfoJsonConverter());
            _jsonOptions.Converters.Add(new TDocBinaryInfoItemJsonConverter());
            _jsonOptions.Converters.Add(new TOriginalRFIDGraphicsInfoJsonConverter());
            _jsonOptions.Converters.Add(new TOriginalRFIDGraphicsInfoItemJsonConverter());
            _jsonOptions.Converters.Add(new TextJsonConverter());
            _jsonOptions.Converters.Add(new TextAvailableSourceJsonConverter());
            _jsonOptions.Converters.Add(new TextDataResultJsonConverter());
            _jsonOptions.Converters.Add(new TextFieldJsonConverter());
            _jsonOptions.Converters.Add(new TextFieldTypeJsonConverter());
            _jsonOptions.Converters.Add(new TextFieldTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new TextFieldValueJsonConverter());
            _jsonOptions.Converters.Add(new TextItemJsonConverter());
            _jsonOptions.Converters.Add(new TextPostProcessingJsonConverter());
            _jsonOptions.Converters.Add(new TextPostProcessingNullableJsonConverter());
            _jsonOptions.Converters.Add(new TextResultJsonConverter());
            _jsonOptions.Converters.Add(new TransactionImageJsonConverter());
            _jsonOptions.Converters.Add(new TransactionInfoJsonConverter());
            _jsonOptions.Converters.Add(new TransactionProcessGetResponseJsonConverter());
            _jsonOptions.Converters.Add(new TransactionProcessRequestJsonConverter());
            _jsonOptions.Converters.Add(new TransactionProcessResultJsonConverter());
            _jsonOptions.Converters.Add(new TrfFtBytesJsonConverter());
            _jsonOptions.Converters.Add(new TrfFtStringJsonConverter());
            _jsonOptions.Converters.Add(new VerificationResultJsonConverter());
            _jsonOptions.Converters.Add(new VerificationResultNullableJsonConverter());
            _jsonOptions.Converters.Add(new VerifiedFieldMapJsonConverter());
            _jsonOptions.Converters.Add(new VisibilityJsonConverter());
            _jsonOptions.Converters.Add(new VisibilityNullableJsonConverter());
            _jsonOptions.Converters.Add(new VisualExtendedFieldItemJsonConverter());
            JsonSerializerOptionsProvider jsonSerializerOptionsProvider = new(_jsonOptions);
            _services.AddSingleton(jsonSerializerOptionsProvider);
            _services.AddSingleton<IApiFactory, ApiFactory>();
            _services.AddSingleton<HealthcheckApiEvents>();
            _services.AddTransient<IHealthcheckApi, HealthcheckApi>();
            _services.AddSingleton<ProcessApiEvents>();
            _services.AddTransient<IProcessApi, ProcessApi>();
            _services.AddSingleton<TransactionApiEvents>();
            _services.AddTransient<ITransactionApi, TransactionApi>();
        }

        /// <summary>
        /// Configures the HttpClients.
        /// </summary>
        /// <param name="client"></param>
        /// <param name="builder"></param>
        /// <returns></returns>
        public HostConfiguration AddApiHttpClients
        (
            Action<HttpClient>? client = null, Action<IHttpClientBuilder>? builder = null)
        {
            if (client == null)
                client = c => c.BaseAddress = new Uri(ClientUtils.BASE_ADDRESS);

            List<IHttpClientBuilder> builders = new List<IHttpClientBuilder>();

            builders.Add(_services.AddHttpClient<IHealthcheckApi, HealthcheckApi>(client));
            builders.Add(_services.AddHttpClient<IProcessApi, ProcessApi>(client));
            builders.Add(_services.AddHttpClient<ITransactionApi, TransactionApi>(client));
            
            if (builder != null)
                foreach (IHttpClientBuilder instance in builders)
                    builder(instance);

            HttpClientsAdded = true;

            return this;
        }

        /// <summary>
        /// Configures the JsonSerializerSettings
        /// </summary>
        /// <param name="options"></param>
        /// <returns></returns>
        public HostConfiguration ConfigureJsonOptions(Action<JsonSerializerOptions> options)
        {
            options(_jsonOptions);

            return this;
        }

        /// <summary>
        /// Adds tokens to your IServiceCollection
        /// </summary>
        /// <typeparam name="TTokenBase"></typeparam>
        /// <param name="token"></param>
        /// <returns></returns>
        public HostConfiguration AddTokens<TTokenBase>(TTokenBase token) where TTokenBase : TokenBase
        {
            return AddTokens(new TTokenBase[]{ token });
        }

        /// <summary>
        /// Adds tokens to your IServiceCollection
        /// </summary>
        /// <typeparam name="TTokenBase"></typeparam>
        /// <param name="tokens"></param>
        /// <returns></returns>
        public HostConfiguration AddTokens<TTokenBase>(IEnumerable<TTokenBase> tokens) where TTokenBase : TokenBase
        {
            TokenContainer<TTokenBase> container = new TokenContainer<TTokenBase>(tokens);
            _services.AddSingleton(services => container);

            return this;
        }

        /// <summary>
        /// Adds a token provider to your IServiceCollection
        /// </summary>
        /// <typeparam name="TTokenProvider"></typeparam>
        /// <typeparam name="TTokenBase"></typeparam>
        /// <returns></returns>
        public HostConfiguration UseProvider<TTokenProvider, TTokenBase>() 
            where TTokenProvider : TokenProvider<TTokenBase>
            where TTokenBase : TokenBase
        {
            _services.AddSingleton<TTokenProvider>();
            _services.AddSingleton<TokenProvider<TTokenBase>>(services => services.GetRequiredService<TTokenProvider>());

            return this;
        }
    }
}
